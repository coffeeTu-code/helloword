# 函数响应式编程（FRP）

[TOC]

现在有下面4个概念，需要我们理清一下它们之间的关系：
- 面向对象编程 Object Oriented Programming
- 响应式编程 Reactive Programming
- 函数式编程 Functional Programming
- 函数响应式编程 Functional Reactive Programming

## 一、什么是函数式编程 Functional Programming

### 1. 函数是"第一等公民"

所谓"第一等公民"（first class），指的是函数与其他数据类型一样，处于平等地位，可以赋值给其他变量，也可以作为参数，传入另一个函数，或者作为别的函数的返回值。

### 2. 闭包和高阶函数

闭包是起函数的作用并可以像对象一样操作的对象。与此类似，函数式编程语言支持高阶函数。高阶函数可以用另一个函数（间接地，用一个表达式） 作为其输入参数，在大多数情况下，它甚至返回一个函数作为其输出参数。这两种结构结合在一起使得可以用优雅的方式进行模块化编程，这是使用函数式编程的最大好处。

### 3. 不改变状态(由此延伸出”引用透明”的概念)

函数式编程只是返回新的值，不修改系统变量。因此，不修改变量，也是它的一个重要特点。在其他类型的语言中，变量往往用来保存"状态"（state）。不修改变量，意味着状态不能保存在变量中。函数式编程使用参数保存状态，最好的例子就是递归。

避免使用程序状态和可变对象，是降低程序复杂度的有效方式之一，而这也正是函数式编程的精髓。函数式编程强调执行的结果，而非执行的过程。我们先构建一系列简单却具有一定功能的小函数，然后再将这些函数进行组装以实现完整的逻辑和复杂的运算，这是函数式编程的基本思想。

> 引用透明：
> 
> 如果提供同样的输入，那么函数总是返回同样的结果。就是说，表达式的值不依赖于可以改变值的全局状态。这使您可以从形式上推断程序行为，因为表达式的意义只取决于其子表达式而不是计算顺序或者其他表达式的副作用。满足上面要求的函数，就可以说它是引用透明的，也有说法叫这种特性为幂等性

### 4.递归

函数式编程是用递归做为控制流程的机制。

### 5.只用"表达式"，不用"语句"，没有副作用

"表达式"（expression）是一个单纯的运算过程，总是有返回值；"语句"（statement）是执行某种操作，没有返回值。函数式编程要求，只使用表达式，不使用语句。也就是说，每一步都是单纯的运算，而且都有返回值。

原因是函数式编程的开发动机，一开始就是为了处理运算（computation），不考虑系统的读写（I/O）。"语句"属于读写操作，所以就被排斥在外。

函数式编程强调没有"副作用"，意味着函数要保持独立，所有功能就是返回一个新的值，没有其他行为，尤其是不得修改外部变量的值。

## 二、函数响应式编程 Functional Reactive Programming

函数响应式编程满足函数式编程的上述特性。

函数响应式编程是面向离散事件流的，在一个时间轴上会产生一些离散事件，这些事件会依次向下传递。

接着再来说说之前说的4种编程范式，总结出来，如果按照类似继承图谱来看的话，应该如下图：

![](https://img.halfrost.com/Blog/ArticleImage/RAC_3.png)

首先在声明式编程里面有2大家族，那就是函数式编程和数据流编程，数据流编程下面就是响应式编程，而函数响应式编程是"继承"于函数式编程和响应式编程的。